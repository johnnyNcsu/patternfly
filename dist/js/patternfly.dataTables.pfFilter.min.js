!function(factory){"use strict";"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function($){return factory($,window,document)}):"object"==typeof exports?module.exports=function(root,$){return root||(root=window),$&&$.fn.dataTable||($=require("datatables.net")(root,$).$),factory($,root,root.document)}:factory(jQuery,window,document)}(function($,window,document,undefined){"use strict";function addActiveFilterControl(dt,filter){var i,ctx=dt.settings()[0];ctx._pfFilter.activeFilterControls.append('<li><span class="label label-info">'+filter.name+(filter.onSelect?" ":": ")+filter.value+'<a href="#"><span class="pficon pficon-close"/></a></span></li>'),$("a",ctx._pfFilter.activeFilterControls).last().on("click",function(e){for(i=0;i<ctx._pfFilter.filters.length;i++)if(filter.customFilter){if(ctx._pfFilter.filters[i].name===filter.name){ctx._pfFilter.filters.splice(i,1),$.fn.dataTable.ext.search.splice(i+1,1),$(this).parents("li").remove();break}}else if(ctx._pfFilter.filters[i].column===filter.column&&ctx._pfFilter.filters[i].value===filter.value){ctx._pfFilter.filters.splice(i,1),$(this).parents("li").remove();break}0===ctx._pfFilter.filters.length&&(ctx._pfFilter.activeFilters.addClass("hidden"),document.getElementById("filterInput").placeholder=FILTER_INPUT_PLACEHOLDER,document.getElementById("filter").innerHTML=FILTER_BUTTON_TEXT),dt.draw(),updateFilterResults(dt)}),ctx._pfFilter.activeFilters.removeClass("hidden")}function addFilter(dt,filter){var ctx=dt.settings()[0],found=!1;return $.grep(ctx._pfFilter.filters,function(f){f.customFilter?f.name===filter.name&&f.value===filter.value&&(found=!0):f.column===filter.column&&f.value===filter.value&&(found=!0)}),found||ctx._pfFilter.filters.push(filter),!found}function clearFilters(dt){var ctx=dt.settings()[0];ctx._pfFilter.filters.length=0,$.fn.dataTable.ext.search.length=1,ctx._pfFilter.activeFilterControls.html(""),ctx._pfFilter.activeFilters.addClass("hidden"),document.getElementById("filterInput").placeholder=FILTER_INPUT_PLACEHOLDER,document.getElementById("filter").innerHTML=FILTER_BUTTON_TEXT,dt.draw()}function handleClearFilters(dt){var ctx=dt.settings()[0];ctx._pfFilter.clearFilters!==undefined&&0!==ctx._pfFilter.clearFilters.length&&ctx._pfFilter.clearFilters.on("click",function(e){clearFilters(dt)})}function allPass(){return!0}function handleFilterInput(dt){var ctx=dt.settings()[0];ctx._pfFilter.filterInput!==undefined&&0!==ctx._pfFilter.filterInput.length&&ctx._pfFilter.filterInput.on("keypress",function(e){var keycode=e.keyCode?e.keyCode:e.which,newFilter={column:ctx._pfFilter.filterColumn,name:ctx._pfFilter.filterName,value:this.value,onSelect:!1,customFilter:ctx._pfFilter.filterOnSelect?null:ctx._pfFilter.filterFunction};return 13!==keycode||(e.preventDefault(),this.value.trim().length>0&&(addFilter(dt,newFilter)&&(newFilter.customFilter&&$.fn.dataTable.ext.search.push(newFilter.customFilter),dt.draw(),addActiveFilterControl(dt,newFilter),updateFilterResults(dt)),ctx._pfFilter.filterInput.val("")),!1)})}function handleFilterOption(dt,i){var ctx=dt.settings()[0];null!==ctx._pfFilter.filterCols[i]&&ctx._pfFilter.filterCols[i].optionSelector!==undefined&&$(ctx._pfFilter.filterCols[i].optionSelector).on("click",function(e){var newFilter=new Object;return null===FILTER_BUTTON_TEXT&&(FILTER_INPUT_PLACEHOLDER=document.getElementById("filterInput").placeholder,FILTER_BUTTON_TEXT=document.getElementById("filter").innerHTML),ctx._pfFilter.filterInput!==undefined&&0!==ctx._pfFilter.filterInput.length&&(ctx._pfFilter.filterInput.get(0).placeholder=ctx._pfFilter.filterCols[i].placeholder),ctx._pfFilter.filterLabel!==undefined&&0!==ctx._pfFilter.filterLabel.length&&ctx._pfFilter.filterLabel.html($(this).text()),ctx._pfFilter.filterButton!==undefined&&0!==ctx._pfFilter.filterButton.length&&ctx._pfFilter.filterButton.html($(this).text()+' <span class="caret"></span>'),ctx._pfFilter.filterColumn=ctx._pfFilter.filterCols[i].columnNum>0&&ctx._pfFilter.filterCols[i].columnNum<ctx._pfFilter.filterCols.length?ctx._pfFilter.filterCols[i].columnNum:i,ctx._pfFilter.filterOnSelect=ctx._pfFilter.filterCols[i].filterOnSelect,ctx._pfFilter.filterFunction=ctx._pfFilter.filterCols[i].useCustomFilter?$.isFunction(ctx._pfFilter.filterCols[i].useCustomFilter)?ctx._pfFilter.filterCols[i].useCustomFilter:allPass:null,ctx._pfFilter.filterName=$(this).text(),ctx._pfFilter.filterOnSelect&&(newFilter.column=ctx._pfFilter.filterColumn,newFilter.name=ctx._pfFilter.filterName,newFilter.value="",newFilter.onSelect=!0,newFilter.customFilter=ctx._pfFilter.filterFunction,addFilter(dt,newFilter)&&(newFilter.customFilter&&$.fn.dataTable.ext.search.push(newFilter.customFilter),dt.draw(),addActiveFilterControl(dt,newFilter),updateFilterResults(dt))),!0})}function updateFilterResults(dt){var ctx=dt.settings()[0],filteredRows=dt.rows({page:"current",search:"applied"}).flatten().length;ctx._pfFilter.filterResults!==undefined&&0!==ctx._pfFilter.filterResults.length&&ctx._pfFilter.filterResults.html(filteredRows+" Results")}var DataTable=$.fn.dataTable,FILTER_INPUT_PLACEHOLDER=null,FILTER_BUTTON_TEXT=null;return DataTable.pfFilter={},DataTable.pfFilter.init=function(dt){var i,ctx=dt.settings()[0],opts=ctx.oInit.pfConfig?ctx.oInit.pfConfig:{};if(ctx._pfFilter={},ctx._pfFilter.filterButton=$(".toolbar-pf-filter button",opts.toolbarSelector),ctx._pfFilter.filterCols=opts.filterCols,ctx._pfFilter.filterLabel=$(".toolbar-pf-filter label",opts.toolbarSelector),ctx._pfFilter.filterInput=$(".toolbar-pf-filter input",opts.toolbarSelector),ctx._pfFilter.filters=[],ctx._pfFilter.activeFilterControls=$(".list-inline",opts.toolbarSelector),ctx._pfFilter.activeFilters=ctx._pfFilter.activeFilterControls.closest("div"),ctx._pfFilter.clearFilters=$(".toolbar-pf-results a",opts.toolbarSelector),ctx._pfFilter.results=$(".toolbar-pf-results",opts.toolbarSelector),ctx._pfFilter.filterCaseInsensitive=opts.filterCaseInsensitive,ctx._pfFilter.filterResults=$(".toolbar-pf-results h5",opts.toolbarSelector),ctx._pfFilter.filterOnSelect=!1,ctx._pfFilter.filterFunction=null,ctx._pfFilter.filterCols!==undefined){for(i=0;i<ctx._pfFilter.filterCols.length&&(null===ctx._pfFilter.filterCols[i]||(ctx._pfFilter.filterColumn=i,ctx._pfFilter.filterName=$(ctx._pfFilter.filterCols[i].optionSelector).text(),!0!==ctx._pfFilter.filterCols[i].default));i++);for(i=0;i<ctx._pfFilter.filterCols.length;i++)handleFilterOption(dt,i);handleFilterInput(dt),handleClearFilters(dt),$.fn.dataTable.ext.search.push(function(ctx,data,dataIndex){var showThisRow=!0;return ctx._pfFilter&&$.each(ctx._pfFilter.filters,function(index,filter){return!!filter.customFilter||(ctx._pfFilter.filterCaseInsensitive!==undefined&&!0===ctx._pfFilter.filterCaseInsensitive?-1===data[filter.column].toLowerCase().indexOf(filter.value.toLowerCase())&&(showThisRow=!1):-1===data[filter.column].indexOf(filter.value)&&(showThisRow=!1),showThisRow)}),showThisRow})}},DataTable.Api.register("pfFilter.addFilter()",function(filter){return this.iterator("table",function(ctx){addFilter(new DataTable.Api(ctx),filter)})}),DataTable.Api.register("pfFilter.clearFilters()",function(){return this.iterator("table",function(ctx){clearFilters(new DataTable.Api(ctx))})}),$(document).on("init.dt",function(e,ctx,json){"dt"===e.namespace&&DataTable.pfFilter.init(new DataTable.Api(ctx))}),DataTable.pfFilter});